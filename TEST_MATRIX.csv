Test ID,Category,Title,Preconditions,Steps,Expected Result,Test Type,Severity,Automated
F-01,Functional,Create poll - valid input,User logged in,"1) Navigate to Create Poll; 2) Enter valid title, description, 3 options; 3) Submit",201 Created; response contains poll.id and poll.shareUrl; poll persisted in DB,Functional,High,Yes
F-02,Functional,Create poll - validation errors,User logged in,1) Navigate to Create Poll; 2) Enter title < 3 chars OR only 1 option; 3) Submit,400 Bad Request; validation error message explaining failure,Functional,Medium,Yes
F-03,Functional,View poll by id,Poll exists,1) GET /api/polls/{id},200 OK; returns poll object with options ordered and metadata,Functional,High,Yes
F-04,Functional,View poll by shareUrl,Poll exists,1) GET /api/polls/share/{shareUrl},200 OK; returns same poll as ID endpoint,Functional,High,Yes
F-05,Functional,Anonymous vote,"Public poll (requireAuth=false), not voted yet",1) Open poll page as guest; 2) Select option; 3) Submit vote,201 Created; option.voteCount and poll.totalVotes increment; hasVoted true for viewer,Functional,High,Yes
F-06,Functional,Authenticated vote on requireAuth poll,User logged in; poll.requireAuth=true,1) Login; 2) Open poll; 3) Select option; 4) Submit,201 Created; counts update; hasVoted true,Functional,High,Yes
F-07,Functional,Prevent multiple votes when disallowed,User (or guest) already voted; poll.allowMultiple=false,1) Attempt second vote from same client (same session/device/IP),403 or descriptive error; vote not accepted; counts unchanged,Functional,High,Yes
F-08,Functional,View results visibility rules,Poll.showResults=AFTER_VOTE,1) Open poll before voting → results hidden; 2) Vote → results visible,Behavior matches policy; results shown/hidden accordingly,Functional,Medium,Yes
I-01,Integration,Vote increments atomically (DB + cache),DB and Redis running,1) POST vote; 2) Read DB option.voteCount and poll.totalVotes; 3) Read cached results,Counts reflect vote; cache invalidated/updated; publish event sent,Integration,High,Yes
I-02,Integration,Concurrent voting consistency,Poll exists with multiple options,1) Simulate 2 concurrent POST /vote to different options; 2) Read DB counts,Counts reflect both votes (no lost update),Integration,High,Yes
I-03,Integration,Share link resolves to same poll,Poll has shareUrl,1) GET /poll/{shareUrl} → API or app deep link; 2) Verify poll data equals GET by id,Share route returns same poll and allows vote if eligible,Integration,Medium,Yes
E2E-01,E2E,Full create→share→external vote,User A and User B accounts; clean DB,1) User A creates poll; 2) Copy share URL; 3) User B opens share URL; 4) User B votes; 5) Verify User A sees updated totals,End-to-end flow works; totals updated for creator and viewer,E2E,High,No (Manual/Automated via Playwright+Cypress)
E2E-02,E2E,Auth persistence across app restart,User logged in,1) Login; 2) Close app; 3) Reopen app,User remains logged in (tokens persisted); My Polls visible,E2E,High,No
P-01,Performance,Load test voting endpoint,Poll exists,1) Simulate 1000 concurrent clients POST /api/polls/{id}/vote for 1 minute,API remains responsive; no data loss; acceptable latency,Performance,High,Yes (k6)
P-02,Performance,Results cache effectiveness,Poll has traffic,1) Repeated GET /api/polls/{id}/results; 2) After vote verify cache invalidation,Cached responses served; TTL works; cache invalidated on vote,Performance,Medium,Yes
S-01,Security,Expired/invalid token handling,Protected endpoints,1) Call protected endpoint with expired access token,401 returned; no sensitive data leaked,Security,High,Yes
S-02,Security,Refresh token rotation and replay protection,Valid refresh token used once,1) POST /auth/refresh with refreshToken; 2) Try reusing old refreshToken,Old token rejected (401); new tokens issued; old token invalid,Security,High,Yes
S-03,Security,XSS in poll content,Web client; poll creation allowed,1) Create poll with <script>alert(1)</script> in title; 2) View poll in web,No script execution; content escaped in UI,Security,High,Yes (automated DOM check)
S-04,Security,SQL/ORM injection protection,API endpoints accepting text,1) Submit malicious payloads in title/options; 2) Observe API and DB,Inputs sanitized/parameterized; no DB compromise; API returns validation or safe handling,Security,High,Yes
S-05,Security,CORS restrictions,Browser origin not allowed,1) From disallowed origin attempt API request,CORS blocks request; appropriate response/headers,Security,Medium,Yes
S-06,Security,Rate limiting & abuse,Voting endpoint,1) Simulate bursts from single IP and many IPs trying to bypass,Rate limiter triggers; server returns 429; logs generated,Security,High,Yes
R-01,Resilience,Redis down graceful degradation,Redis stopped,1) Attempt GET results and POST vote,App returns graceful error; vote may still persist to DB or returns readable error; server not crashed,Resilience,High,Yes
O-01,Observability,Sensitive data not logged,Trigger an error that includes request payload,1) Cause server error; inspect logs,No tokens/PII in logs; structured error present,Observability,High,Yes
